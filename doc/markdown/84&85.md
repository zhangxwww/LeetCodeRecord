# Largest Rectangle in Histogram & Maximal Rectangle

Difficulty: Hard & Hard

---

这两道题其实是非常像的，可以说第二题是第一题的“二维”版本。

首先来看第一题。在柱状图中计算最大的矩形面积，可以按照这样的思路：

对每一根柱，计算以该柱为最左边的柱的矩形所能达到的最大面积。

换句话说，也就是对每根柱，找到其右侧第一根高度低于自身的柱的位置。用二者位置的差值，乘以自身的高度，即为上面所说的，以该柱为最左边的柱的矩形所能达到的最大面积。

对所有的最大面积求最大值，就能得到题目要求的最大面积了。

这里可以用单调栈来实现。所谓单调栈，可以理解为，在下一个元素大于栈顶元素的情况下，不断弹出栈顶元素，最后再压入下一个元素。这样能保证栈中的元素始终是单调递增的。

在本题中，当栈顶元素被弹出的时候，就意味着，当前的柱，是被弹出柱右侧的第一根高度低于被弹出柱的柱。此时计算被弹出柱对应的矩形面积即可。

而对于第二题，可以先对每一列，计算每个“1”是该列中连续的第几个“1”。例如对样例来说：

```
[
	[1, 0, 1, 0, 0],
	[1, 0, 1, 1, 1],
	[1, 1, 1, 1, 1],
	[1, 0, 0, 1, 0]
]
```

可以得到

```
[
	[1, 0, 1, 0, 0],
	[2, 0, 2, 1, 1],
	[3, 1, 3, 2, 2],
	[4, 0, 0, 3, 0]
]
```

这样，每一行都变成了一个柱状图，用上面第一题的解法即可。

